{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "QuestaoGeradaEnem",
  "type": "object",
  "required": [
    "id",
    "area",
    "disciplina",
    "materia",
    "tipo",
    "enunciado",
    "alternativas",
    "gabarito",
    "explicacao",
    "competencia",
    "habilidade",
    "dificuldade",
    "tags",
    "fontes"
  ],
  "properties": {
    "id": {
      "type": "string",
      "minLength": 3
    },
    "area": {
      "type": "string",
      "minLength": 3
    },
    "disciplina": {
      "type": "string",
      "minLength": 2
    },
    "materia": {
      "type": "string",
      "minLength": 2
    },
    "tipo": {
      "type": "string",
      "enum": [
        "treino",
        "simulado",
        "redacao"
      ]
    },
    "enunciado": {
      "type": "string",
      "minLength": 20
    },
    "alternativas": {
      "type": "object",
      "required": [
        "A",
        "B",
        "C",
        "D",
        "E"
      ],
      "properties": {
        "A": {
          "type": "string",
          "minLength": 1
        },
        "B": {
          "type": "string",
          "minLength": 1
        },
        "C": {
          "type": "string",
          "minLength": 1
        },
        "D": {
          "type": "string",
          "minLength": 1
        },
        "E": {
          "type": "string",
          "minLength": 1
        }
      },
      "additionalProperties": true
    },
    "gabarito": {
      "type": "string",
      "enum": [
        "A",
        "B",
        "C",
        "D",
        "E"
      ]
    },
    "explicacao": {
      "type": "string",
      "minLength": 20
    },
    "competencia": {
      "type": "string",
      "pattern": "^C[0-9]{1,2}$"
    },
    "habilidade": {
      "type": "string",
      "pattern": "^H[0-9]{1,3}$"
    },
    "dificuldade": {
      "type": "string",
      "enum": [
        "facil",
        "media",
        "dificil"
      ]
    },
    "tags": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "string",
        "minLength": 2
      }
    },
    "fontes": {
      "type": "array",
      "minItems": 1,
      "items": {
        "oneOf": [
          {
            "type": "string",
            "minLength": 3
          },
          {
            "type": "object",
            "required": [
              "titulo"
            ],
            "properties": {
              "titulo": {
                "type": "string",
                "minLength": 3
              },
              "url": {
                "type": "string"
              },
              "data": {
                "type": "string"
              },
              "observacao": {
                "type": "string"
              }
            },
            "additionalProperties": true
          }
        ]
      }
    },
    "generated_by": {
      "type": "string"
    },
    "prompt_ref": {
      "type": "string"
    },
    "review_status": {
      "type": "string",
      "enum": [
        "rascunho",
        "revisado",
        "aprovado",
        "publicado"
      ]
    },
    "reviewed_by": {
      "type": "string"
    },
    "review_notes": {
      "type": "string"
    },
    "approved_at": {
      "type": "string"
    },
    "version": {
      "type": "string"
    },
    "updated_at": {
      "type": "string"
    }
  },
  "additionalProperties": true
}
